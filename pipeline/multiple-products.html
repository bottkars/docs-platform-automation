<!doctype html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><link rel="canonical" href="https://docs.pivotal.io/pipeline/multiple-products.html"><meta name="lang:clipboard.copy" content="Copy to clipboard"><meta name="lang:clipboard.copied" content="Copied to clipboard"><meta name="lang:search.language" content="en"><meta name="lang:search.pipeline.stopwords" content="True"><meta name="lang:search.pipeline.trimmer" content="True"><meta name="lang:search.result.none" content="No matching documents"><meta name="lang:search.result.one" content="1 matching document"><meta name="lang:search.result.other" content="# matching documents"><meta name="lang:search.tokenizer" content="[\s\-]+"><link rel="shortcut icon" href="../assets/icon.svg"><meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.3.0"><title>Pipeline Reference</title><link rel="stylesheet" href="../assets/stylesheets/application.4031d38b.css"><link rel="stylesheet" href="../assets/stylesheets/application-palette.224b79ff.css"><meta name="theme-color" content="#009688"><script src="../assets/javascripts/modernizr.74668098.js"></script><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700|Ubuntu+Mono&display=swap"><style>body,input{font-family:"Source Sans Pro","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style><link rel="stylesheet" href="../assets/fonts/material-icons.css">
<style>
label.md-nav__link {
    font-weight: bold;
}

@media only screen and (min-width: 76.1875em) {
  label.md-nav__title.md-nav__title--site {
      display: none;
  }
}
.header-dropdown {
  display: inline-block;
  position: relative;
  margin-left: 10px;
  cursor: pointer;
}

.header-dropdown:hover .content,
.header-dropdown:hover .content:hover {
  display: block;
  visibility: visible;
  opacity: 1;
}

.header-dropdown .content {
  position: absolute;
  top: 100%;
  background-color: #009688;
  left: 0;
  display: none;
  z-index: 1;
  clear: both;
  padding: 10px;
}

.header-dropdown ul {
  padding: 0;
  margin: 0;
  line-height: 24px;
}

.header-dropdown ul li {
  list-style: none;
}

.md-header-nav__topic {
  overflow: visible;
}

.header-dropdown .pointer {
  height: 24px;
  width: 24px;
  display: inline-flex;
  vertical-align: middle;
  fill: white;
}

.md-typeset pre, .md-typeset code {
  font-size: 100%
}

.md-typeset table:not([class]) {
  font-size: 16px
}

.md-typeset > .codehilitetable {
  overflow: visible;
}

.md-typeset .md-footer-social {
    font-size: .64rem;
}

.md-footer-social {
    padding: .4rem 0;
}
</style>

<!-- Google Tag Manager -->
<script>
 (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
 new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
 j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
 })(window,document,'script','dataLayer','GTM-MW4LZHR');
</script>
</head><body dir="ltr" data-md-color-primary="teal" data-md-color-accent="teal"><svg class="md-svg"><defs><svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg></defs></svg> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" data-md-component="overlay" for="__drawer"></label><a href="#prerequisites" tabindex="1" class="md-skip">Skip to content </a><style>
    .header-dropdown {
        font-size: .75em;
    }

    .header-dropdown .content {
        top: 97%;
    }

    @media only screen and (max-width: 60em) {
        .md-header .secondary-header {
            display: none;
        }
    }
    @media only screen and (min-width: 60em) {
        .md-header {
            height: 7.4rem;
        }

        .md-header .md-header-nav {
            height: 5rem;
        }

        .md-header .md-header-nav .md-flex {
            height: 100%;
        }

        .md-header .md-header-nav .md-flex__cell {
            vertical-align: middle;
        }

        .md-header .md-header-nav .md-header-nav__title {
            font-size: 1.25rem;
            line-height: 5rem;
        }

        .md-header .secondary-header .md-flex__cell {
            width: 30rem;
            text-align: right;
        }

        .md-header .secondary-header .md-grid {
            padding: 0 .6rem;
        }

        .md-header .secondary-header .logo {
            text-align: left;
        }

        .md-header .secondary-header {
            height: 2.4rem;
            line-height: 3.0rem;
            background-color: #243640;
        }

        .md-header .secondary-header .sub {
            font-size: 13px;
        }

        .md-header .secondary-header .sub a {
            margin-right: 17px;
        }

        .global-header-title .pivotal-logo {
            fill: white;
            height: .9rem;
            margin-right: 8px;
        }

        .global-header-title .documentation-letters {
            fill: white;
            height: .6rem;
        }

        .md-sidebar[data-md-state=lock] {
            top: 7.4rem;
        }

        .md-main__inner {
            padding-top: 5rem;
        }
    }
</style>
<header class="md-header" data-md-component="header">
    <div class="secondary-header">
        <div class="md-flex md-grid">
            <div class="md-flex__cell logo">
            <a href="https://docs.pivotal.io" class="global-header-title" target="_blank">
            <svg class="pivotal-logo" xmlns="http://www.w3.org/2000/svg"
                 viewBox="0 0 174.72 40.94">
                <path class="a" d="M38.77,6h-6.2V0h6.2Zm0,34.24H32.56V10.41h6.22Z"></path>
                <path class="a"
                      d="M74.67,10.41,66,36.18c-1.49,4.22-4.15,4.76-6.3,4.76-3.19,0-5.11-1.47-6.24-4.75l-7.22-21.4H43.39V10.41h7.45l7.44,24c.33,1,.53,1.63,1.43,1.63s1.13-.62,1.43-1.63l7.59-24Z"></path>
                <path class="a"
                      d="M90,10.41c8.05,0,13.66,5.31,13.66,12.92V28c0,7.6-5.61,12.92-13.66,12.92S76.32,35.62,76.32,28V23.33c0-7.61,5.62-12.92,13.67-12.92M90,36c4.81,0,7.8-3.64,7.8-8V23.33c0-4.37-3-8-7.8-8-5.1,0-7.8,3.64-7.8,8V28c0,4.37,2.82,8,7.8,8"></path>
                <path class="a"
                      d="M153.32,11.36A53.46,53.46,0,0,0,141.8,10c-8.17,0-13.24,5.15-13.24,13.45v3.27c0,8.3,5.07,13.53,13.24,13.53.19,0,1.64,0,2.3-.06v-5l-2.3.07c-4.45,0-7.43-3.43-7.43-8.53V23.44c0-5.09,3-8.52,7.43-8.52a43.88,43.88,0,0,1,6.09.38l.33.08V40.24h6.22V12.4c0-.53,0-.74-1.13-1"></path>
                <rect class="a" x="160.44" width="6.22" height="40.24"></rect>
                <path class="a"
                      d="M10.92,0H0V40.24H6.47V5.59h3.79c.81,0,1.49,0,2.18.06,5.61.1,8.35,2.33,8.35,6.69,0,.17,0,.29,0,.47,0,4-2.21,6.71-8.32,6.71H10.67c0,1.55,0,4.41,0,5.41.63,0,1.22.06,1.82.06,8.78,0,15-3.45,15-12.11,0-.17,0-.35,0-.52C27.44,3.38,20.69,0,10.92,0"></path>
                <path class="a"
                      d="M114.7,4v6.43h10.13v4.82H114.7V32.61c0,2.73,1.74,2.8,4.26,2.8h5.87v4.83h-7.94c-5.87,0-8.48-2.35-8.48-7.63V4.84Z"></path>
                <path class="a"
                      d="M169.52,37.64a2.6,2.6,0,1,1,2.6,2.6A2.61,2.61,0,0,1,169.52,37.64Zm2.6-2.25a2.23,2.23,0,1,0,2.22,2.24A2.24,2.24,0,0,0,172.12,35.39ZM171.55,39h-.31V36.19h.8c.72,0,1.06.33,1.06.86a.82.82,0,0,1-.58.8l.74,1.17h-.36l-.68-1.1-.67,0Zm.51-1.34c.46,0,.75-.24.75-.62s-.25-.6-.79-.6h-.48V37.7Z"></path>
            </svg>
            <svg class="documentation-letters" xmlns="http://www.w3.org/2000/svg"
                 viewBox="0 0 358.62 30.84">
                <path class="a"
                      d="M3.71,37.26V7.45h9.52c9.25,0,15.06,6.75,15.06,14.92S22.48,37.26,13.23,37.26Zm21.9-14.89c0-7-4.47-12.6-12.38-12.6h-7V34.93h7C21.1,34.93,25.61,29.35,25.61,22.37Z"
                      transform="translate(-3.71 -6.96)"></path>
                <path class="a"
                      d="M33.52,22.37C33.52,13.66,39.24,7,48,7s14.48,6.7,14.48,15.41S56.72,37.79,48,37.79,33.52,31.09,33.52,22.37Zm26.28,0c0-7.55-4.64-13.09-11.8-13.09S36.21,14.82,36.21,22.37s4.6,13.1,11.79,13.1S59.8,29.88,59.8,22.37Z"
                      transform="translate(-3.71 -6.96)"></path>
                <path class="a"
                      d="M67.67,22.37C67.67,13.21,74.33,7,82.78,7a13.38,13.38,0,0,1,10.86,5.27L91.5,13.61a10.84,10.84,0,0,0-8.72-4.33c-7,0-12.42,5.32-12.42,13.09s5.45,13.1,12.42,13.1a10.82,10.82,0,0,0,8.72-4.34l2.19,1.34a13.51,13.51,0,0,1-10.91,5.32C74.33,37.79,67.67,31.54,67.67,22.37Z"
                      transform="translate(-3.71 -6.96)"></path>
                <path class="a"
                      d="M98.79,25.82V7.45h2.59V25.77c0,6,3.17,9.7,9,9.7s9-3.67,9-9.7V7.45H122V25.82c0,7.37-3.94,12-11.62,12S98.79,33.15,98.79,25.82Z"
                      transform="translate(-3.71 -6.96)"></path>
                <path class="a"
                      d="M154.75,37.26V10.66l-10.87,26.6h-1L132,10.66v26.6h-2.55V7.45h3.8l10.14,24.8,10.1-24.8h3.85V37.26Z"
                      transform="translate(-3.71 -6.96)"></path>
                <path class="a" d="M164.76,37.26V7.45h18.91V9.77H167.31v11h16v2.32h-16v11.8h16.36v2.33Z"
                      transform="translate(-3.71 -6.96)"></path>
                <path class="a" d="M211.29,37.26,192.52,11.65V37.26H190V7.45h2.59L211.25,32.7V7.45h2.54V37.26Z"
                      transform="translate(-3.71 -6.96)"></path>
                <path class="a" d="M228.81,37.26V9.77h-9.74V7.45h22.08V9.77h-9.74V37.26Z"
                      transform="translate(-3.71 -6.96)"></path>
                <path class="a"
                      d="M264.93,37.26,262,29.93H246.2l-2.95,7.33H240.3L252.51,7.45h3.17l12.2,29.81ZM254.11,10.17,247.05,27.6h14.08Z"
                      transform="translate(-3.71 -6.96)"></path>
                <path class="a" d="M276.78,37.26V9.77H267V7.45h22.07V9.77h-9.74V37.26Z"
                      transform="translate(-3.71 -6.96)"></path>
                <path class="a" d="M294.39,37.26V7.45h2.55V37.26Z" transform="translate(-3.71 -6.96)"></path>
                <path class="a"
                      d="M303.24,22.37C303.24,13.66,309,7,317.72,7s14.48,6.7,14.48,15.41-5.76,15.42-14.48,15.42S303.24,31.09,303.24,22.37Zm26.28,0c0-7.55-4.65-13.09-11.8-13.09s-11.8,5.54-11.8,13.09,4.61,13.1,11.8,13.1S329.52,29.88,329.52,22.37Z"
                      transform="translate(-3.71 -6.96)"></path>
                <path class="a" d="M359.83,37.26,341.06,11.65V37.26h-2.55V7.45h2.59L359.78,32.7V7.45h2.55V37.26Z"
                      transform="translate(-3.71 -6.96)"></path>
            </svg>
            </a></div>

            <div class="md-flex__cell sub">
                <a href="#">Support</a>
                <a href="#">Downloads</a>
            </div>
        </div>
    </div>
    <nav class="md-header-nav md-grid">
        <div class="md-flex">
            <div class="md-flex__cell md-flex__cell--shrink">
                <a href="https://docs.pivotal.io" title="Platform Automation"
                   class="md-header-nav__button md-logo">
                    
                        <img src="../assets/icon.svg" width="65" height="65">
                    
                </a>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
                <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch">
                <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
                    
                        
                            <span class="md-header-nav__topic">
                                Platform Automation
                                
                                    <span class="header-dropdown">
                                        <a href="testin/pipeline/multiple-products.html">2.1</a>
                                        <span class="pointer">
                                            <svg width="100%" height="100%" viewBox="0 0 24 24" fit="" preserveAspectRatio="xMidYMid meet"
                                               focusable="false"><path d="M18 9H6l6 6 6-6z" fill-rule="evenodd"></path></svg>
                                        </span>
                                        <span class="content">
                                            <ul>
                                              
                                                  <li> <a href="testin/pipeline/multiple-products.html">1.1</a></li>
                                              
                                                  <li> <a href="testin/pipeline/multiple-products.html">2.1</a></li>
                                              
                                                  <li> <a href="testin/pipeline/multiple-products.html">develop</a></li>
                                              
                                            </ul>
                                        </span>
                                    </span>
                                
                            </span>
                            <span class="md-header-nav__topic">
                                Ops Manager + multiple products
                            </span>
                        
                    
                </div>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
                
                    
                        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
                        <div class="md-search" data-md-component="search" role="dialog"><label class="md-search__overlay" for="__search"></label><div class="md-search__inner" role="search"><form class="md-search__form" name="search"><input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active"> <label class="md-icon md-search__icon" for="__search"></label> <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button></form><div class="md-search__output"><div class="md-search__scrollwrap" data-md-scrollfix><div class="md-search-result" data-md-component="result"><div class="md-search-result__meta">Type to start searching</div><ol class="md-search-result__list"></ol></div></div></div></div></div>
                    
                
            </div>
            
                <div class="md-flex__cell md-flex__cell--shrink">
                    <div class="md-header-nav__source">
                        <a href="https://github.com/pivotal/docs-platform-automation/" title="Go to repository" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">Help fix the docs!</div></a>
                    </div>
                </div>
            
        </div>
    </nav>
</header><div class="md-container"><main class="md-main"><div class="md-main__inner md-grid" data-md-component="container"><div class="md-sidebar md-sidebar--primary" data-md-component="navigation"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--primary" data-md-level="0"><label class="md-nav__title md-nav__title--site" for="__drawer"><a href="https://docs.pivotal.io" title="Platform Automation" class="md-nav__button md-logo"><img src="../assets/icon.svg" width="48" height="48"></a>Platform Automation</label><div class="md-nav__source"><a href="https://github.com/pivotal/docs-platform-automation/" title="Go to repository" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">Help fix the docs!</div></a></div><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../index.html" title="Introduction" class="md-nav__link">Introduction</a></li><li class="md-nav__item"><a href="../downloading-and-testing.html" title="Downloading and Testing" class="md-nav__link">Downloading and Testing</a></li><li class="md-nav__item"><a href="../compatibility-and-versioning.html" title="Compatibility and Versioning" class="md-nav__link">Compatibility and Versioning</a></li><li class="md-nav__item"><a href="../release-notes.html" title="Release Notes" class="md-nav__link">Release Notes</a></li><li class="md-nav__item md-nav__item--active md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked><label class="md-nav__link" for="nav-5">Reference Pipelines</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-5">Reference Pipelines</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="resources.html" title="Retrieving External Dependencies" class="md-nav__link">Retrieving External Dependencies</a></li><li class="md-nav__item md-nav__item--active"><input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc"><label class="md-nav__link md-nav__link--active" for="__toc">Ops Manager + multiple products</label><a href="multiple-products.html" title="Ops Manager + multiple products" class="md-nav__link md-nav__link--active">Ops Manager + multiple products</a><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">Table of contents</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#prerequisites" title="Prerequisites" class="md-nav__link">Prerequisites</a></li><li class="md-nav__item"><a href="#installing-ops-manager-and-multiple-products" title="Installing Ops Manager and multiple products" class="md-nav__link">Installing Ops Manager and multiple products</a></li><li class="md-nav__item"><a href="#pipeline-components" title="Pipeline Components" class="md-nav__link">Pipeline Components</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#s3-resources" title="S3 Resources" class="md-nav__link">S3 Resources</a></li><li class="md-nav__item"><a href="#exported-installation-resource" title="Exported Installation Resource" class="md-nav__link">Exported Installation Resource</a></li><li class="md-nav__item"><a href="#configured-resources" title="Configured Resources" class="md-nav__link">Configured Resources</a></li><li class="md-nav__item"><a href="#trigger-resources" title="Trigger Resources" class="md-nav__link">Trigger Resources</a></li><li class="md-nav__item"><a href="#credhub-interpolate-job" title="Credhub Interpolate Job" class="md-nav__link">Credhub Interpolate Job</a></li><li class="md-nav__item"><a href="#jobs" title="Jobs" class="md-nav__link">Jobs</a></li></ul></nav></li></ul></nav></li><li class="md-nav__item"><a href="single-product.html" title="Ops Manager + a product" class="md-nav__link">Ops Manager + a product</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6"><label class="md-nav__link" for="nav-6">Before You Begin</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-6">Before You Begin</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../before-you-begin/git-repo-layout.html" title="Git Repository Layout" class="md-nav__link">Git Repository Layout</a></li><li class="md-nav__item"><a href="../before-you-begin/setup-s3-and-resources.html" title="Set Up S3 for File Storage" class="md-nav__link">Set Up S3 for File Storage</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7"><label class="md-nav__link" for="nav-7">How to Guides</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-7">How to Guides</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../how-to-guides/upgrade-existing-opsman.html" title="Upgrading an Existing Ops Manager" class="md-nav__link">Upgrading an Existing Ops Manager</a></li><li class="md-nav__item"><a href="../how-to-guides/install-opsman.html" title="Installing Ops Manager" class="md-nav__link">Installing Ops Manager</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8"><label class="md-nav__link" for="nav-8">References</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-8">References</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../reference/task.html" title="Tasks" class="md-nav__link">Tasks</a></li><li class="md-nav__item"><a href="../reference/inputs-outputs.html" title="Inputs/Outputs" class="md-nav__link">Inputs/Outputs</a></li><li class="md-nav__item"><a href="../reference/running-commands-locally.html" title="Running Commands Locally" class="md-nav__link">Running Commands Locally</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9"><label class="md-nav__link" for="nav-9">Configuration Management</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-9">Configuration Management</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../configuration-management/configure-auth.html" title="Configure Auth" class="md-nav__link">Configure Auth</a></li><li class="md-nav__item"><a href="../configuration-management/creating-a-director-config-file.html" title="Creating a Director Config File" class="md-nav__link">Creating a Director Config File</a></li><li class="md-nav__item"><a href="../configuration-management/creating-a-product-config-file.html" title="Creating a Product Config File" class="md-nav__link">Creating a Product Config File</a></li><li class="md-nav__item"><a href="../configuration-management/configure-env.html" title="Configuring Env" class="md-nav__link">Configuring Env</a></li><li class="md-nav__item"><a href="../configuration-management/secrets-handling.html" title="Secrets Handling" class="md-nav__link">Secrets Handling</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10"><label class="md-nav__link" for="nav-10">Pipeline Design</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-10">Pipeline Design</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../pipeline-design/variables.html" title="Variables" class="md-nav__link">Variables</a></li><li class="md-nav__item"><a href="../pipeline-design/stemcell-handling.html" title="Stemcell Handling" class="md-nav__link">Stemcell Handling</a></li></ul></nav></li><li class="md-nav__item"><a href="../upgrade.html" title="About Upgrading Ops Manager" class="md-nav__link">About Upgrading Ops Manager</a></li><li class="md-nav__item"><a href="../report-an-issue.html" title="Report an Issue" class="md-nav__link">Report an Issue</a></li></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component="toc"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">Table of contents</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#prerequisites" title="Prerequisites" class="md-nav__link">Prerequisites</a></li><li class="md-nav__item"><a href="#installing-ops-manager-and-multiple-products" title="Installing Ops Manager and multiple products" class="md-nav__link">Installing Ops Manager and multiple products</a></li><li class="md-nav__item"><a href="#pipeline-components" title="Pipeline Components" class="md-nav__link">Pipeline Components</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#s3-resources" title="S3 Resources" class="md-nav__link">S3 Resources</a></li><li class="md-nav__item"><a href="#exported-installation-resource" title="Exported Installation Resource" class="md-nav__link">Exported Installation Resource</a></li><li class="md-nav__item"><a href="#configured-resources" title="Configured Resources" class="md-nav__link">Configured Resources</a></li><li class="md-nav__item"><a href="#trigger-resources" title="Trigger Resources" class="md-nav__link">Trigger Resources</a></li><li class="md-nav__item"><a href="#credhub-interpolate-job" title="Credhub Interpolate Job" class="md-nav__link">Credhub Interpolate Job</a></li><li class="md-nav__item"><a href="#jobs" title="Jobs" class="md-nav__link">Jobs</a></li></ul></nav></li></ul></nav></div></div></div><div class="md-content"><article class="md-content__inner md-typeset"><a href="https://github.com/pivotal/docs-platform-automation/edit/develop/docs/pipeline/multiple-products.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a><h1>Ops Manager + multiple products</h1><p>Below you will find a reference pipeline that illustrates the tasks and provides an example of a basic pipeline design. You know your environment and constraints and we don't - we recommend you look at the tasks that make up the pipeline, and see how they can be arranged for your specific automation needs. For a deeper dive into each task see the Task Reference.</p>
<p>These Concourse pipelines are examples on how to use the <a href="../reference/task.html">tasks</a>. If you use a different CI/CD platform, you can use these Concourse files as examples of the inputs, outputs, and arguments used in each step in the workflow.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Deployed Concourse</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Platform Automation for PCF is based on Concourse CI.
We recommend that you have some familiarity with Concourse before getting started.
If you are new to Concourse, <a href="https://docs.pivotal.io/p-concourse/3-0/guides.html">Concourse CI Tutorials</a> would be a good place to start.</p>
</div>
<ul>
<li>Persisted datastore that can be accessed by Concourse resource (e.g. s3, gcs, minio)</li>
<li>A valid <a href="../configuration-management/configure-env.html#generating-an-env-file">generating-env-file</a>: this file will contain credentials necessary to login to Ops Manager using the <code>om</code> CLI.
It is used by every task within Platform Automation for PCF</li>
<li>A valid <a href="../configuration-management/configure-auth.html#generating-an-auth-file">auth-file</a>: this file will contain the credentials necessary to create the Ops Manager login the first time
the VM is created. The choices for this file are simple or saml authentication.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>There will be some crossover between the auth file and the env file due to how om is setup and how the system works. It is highly recommended to parameterize these values, and let a credential management system (such as Credhub) fill in these values for you in order to maintain consistency across files.</p>
</div>
<ul>
<li>An [opsman-configuration] file: This file is required to connect to an IAAS, and control the lifecycle management
 of the Ops Manager VM</li>
<li>A <a href="../configuration-management/creating-a-director-config-file.html">director-configuration</a> file: Each Ops Manager needs its own configuration, but it is retrieved differently from
a product configuration. This config is used to deploy a new Ops Manager director, or update an existing one.</li>
<li>A set of valid <a href="../configuration-management/creating-a-product-config-file.html">product-configuration</a> files: Each product configuration is a yaml file that contains the properties
necessary to configure an Ops Manager product using the <code>om</code> tool. This can be used during install or update.</li>
<li>(Optional) A working <a href="https://docs.pivotal.io/pivotalcf/credhub/">credhub</a> setup with its own UAA client and secret.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Retrieving products from Pivnet</p>
<p>Please ensure products have been procured from Pivotal Network using the <a href="resources.html">reference-resources</a>.</p>
</div>
<h2 id="installing-ops-manager-and-multiple-products">Installing Ops Manager and multiple products</h2>
<p>The pipeline shows how to compose the tasks
to install Ops Manager and the PCF and Healthwatch products.
Its dependencies are coming from a trusted git repository,
which can be retrieved using <a href="resources.html">this pipeline</a>.</p>
<h2 id="pipeline-components">Pipeline Components</h2>
<h3 id="s3-resources">S3 Resources</h3>
<p>These can either be uploaded manually or from the <a href="resources.html">reference resources pipeline</a>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nt">resources</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3</span>
    <span class="nt">source</span><span class="p">:</span>
      <span class="nt">access_key_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.access_key_id))</span>
      <span class="nt">secret_access_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.secret_access_key))</span>
      <span class="nt">region_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.region_name))</span>
      <span class="nt">bucket</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.buckets.pivnet_products))</span>
      <span class="nt">regexp</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.*tasks-(.*).zip</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3</span>
    <span class="nt">source</span><span class="p">:</span>
      <span class="nt">access_key_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.access_key_id))</span>
      <span class="nt">secret_access_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.secret_access_key))</span>
      <span class="nt">region_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.region_name))</span>
      <span class="nt">bucket</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.buckets.pivnet_products))</span>
      <span class="nt">regexp</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.*image-(.*).tgz</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">opsman-image</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3</span>
    <span class="nt">source</span><span class="p">:</span>
      <span class="nt">access_key_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.access_key_id))</span>
      <span class="nt">bucket</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.buckets.pivnet_products))</span>
      <span class="nt">region_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.region_name))</span>
      <span class="nt">secret_access_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.secret_access_key))</span>
      <span class="nt">regexp</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">\[ops-manager,(.*)\].*.ova</span> <span class="c1"># vsphere ex: ops-manager-(.*).ova</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-stemcell</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3</span>
    <span class="nt">source</span><span class="p">:</span>
      <span class="nt">access_key_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.access_key_id))</span>
      <span class="nt">secret_access_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.secret_access_key))</span>
      <span class="nt">region_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.region_name))</span>
      <span class="nt">bucket</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.buckets.pivnet_products))</span>
      <span class="nt">regexp</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-stemcell/\[stemcells-ubuntu-xenial,(.*)\]bosh-stemcell-.*-vsphere.*\.tgz</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-product</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3</span>
    <span class="nt">source</span><span class="p">:</span>
      <span class="nt">access_key_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.access_key_id))</span>
      <span class="nt">secret_access_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.secret_access_key))</span>
      <span class="nt">region_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.region_name))</span>
      <span class="nt">bucket</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.buckets.pivnet_products))</span>
      <span class="nt">regexp</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">\[elastic-runtime,(.*)\]cf-.*.pivotal</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-windows-product</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3</span>
    <span class="nt">source</span><span class="p">:</span>
      <span class="nt">access_key_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.access_key_id))</span>
      <span class="nt">bucket</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.buckets.pivnet_products))</span>
      <span class="nt">region_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.region_name))</span>
      <span class="nt">secret_access_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.secret_access_key))</span>
      <span class="nt">regexp</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">\[pas-windows,(.*)\]pas-windows-.*.pivotal</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-windows-stemcell</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3</span>
    <span class="nt">source</span><span class="p">:</span>
      <span class="nt">access_key_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.access_key_id))</span>
      <span class="nt">bucket</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.buckets.pivnet_products))</span>
      <span class="nt">region_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.region_name))</span>
      <span class="nt">secret_access_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.secret_access_key))</span>
      <span class="nt">regexp</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-windows-stemcell/\[stemcells-windows-server,(.*)\]bosh-stemcell-.*-vsphere.*\.tgz</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">healthwatch-stemcell</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3</span>
    <span class="nt">source</span><span class="p">:</span>
      <span class="nt">access_key_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.access_key_id))</span>
      <span class="nt">secret_access_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.secret_access_key))</span>
      <span class="nt">region_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.region_name))</span>
      <span class="nt">bucket</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.buckets.pivnet_products))</span>
      <span class="nt">regexp</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">healthwatch-stemcell/\[stemcells-ubuntu-xenial,(.*)\]bosh-stemcell-.*-vsphere.*\.tgz</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">healthwatch-product</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3</span>
    <span class="nt">source</span><span class="p">:</span>
      <span class="nt">access_key_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.access_key_id))</span>
      <span class="nt">secret_access_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.secret_access_key))</span>
      <span class="nt">region_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.region_name))</span>
      <span class="nt">bucket</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.buckets.pivnet_products))</span>
      <span class="nt">regexp</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">\[p-healthwatch,(.*)\]p-healthwatch-.*.pivotal</span>
</pre></div>
</td></tr></table>

<h3 id="exported-installation-resource">Exported Installation Resource</h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is recommended to persist the zip file exported from export-installation
 to an external file store (eg S3) on a regular basis.
 The exported installation can restore the Ops Manager
 to a working state if it is non-functional.</p>
</div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">installation</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">s3</span>
    <span class="nt">source</span><span class="p">:</span>
      <span class="nt">access_key_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.access_key_id))</span>
      <span class="nt">secret_access_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.secret_access_key))</span>
      <span class="nt">region_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.region_name))</span>
      <span class="nt">bucket</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((s3.buckets.installation))</span>
      <span class="nt">regexp</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">installation-(.*).zip</span>
</pre></div>
</td></tr></table>

<h3 id="configured-resources">Configured Resources</h3>
<p>These contain values for
opsman vm creation, director, product, foundation-specific vars, auth, and env files.
For more details, see the <a href="../reference/inputs-outputs.html">Inputs and Outputs</a> section.
Platform Automation will not create these resources for you.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  <span class="c1"># configurations</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">git</span>
    <span class="nt">source</span><span class="p">:</span>
      <span class="nt">private_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((configuration.private_key))</span>
      <span class="nt">uri</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((configuration.uri))</span>
      <span class="nt">branch</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">master</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">git</span>
    <span class="nt">source</span><span class="p">:</span>
      <span class="nt">private_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((variable.private_key))</span>
      <span class="nt">uri</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((variable.uri))</span>
      <span class="nt">branch</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">master</span>
</pre></div>
</td></tr></table>

<h3 id="trigger-resources">Trigger Resources</h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  <span class="c1"># triggers used to have jobs do something in a timely manner</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">one-time-trigger</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">time</span>
    <span class="nt">source</span><span class="p">:</span>
      <span class="nt">interval</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">999999h</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">daily-trigger</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">time</span>
    <span class="nt">source</span><span class="p">:</span>
      <span class="nt">interval</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">24h</span>
</pre></div>
</td></tr></table>

<h3 id="credhub-interpolate-job">Credhub Interpolate Job</h3>
<p><code>((foundation))</code> is a value
intended to be replaced by the filepath
of your foundation directory structure in github
(if you are not using multi-foundation, this value can be removed).</p>
<p><code>((credhub-*))</code> are values for accessing your Concourse Credhub.
These are set when <code>fly</code>-ing your pipeline.
For more information on how to fly your pipeline
and use <code>((foundation))</code>,
please reference our How To Guides for your specific workflow.
Platform Automation will not create your Credhub or store values into your Credhub for you.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># This task is used in multiple jobs</span>
<span class="c1"># The yaml anchor &quot;*interpolate-creds&quot; is used in its place</span>
<span class="nt">interpolate-creds</span><span class="p">:</span> <span class="nl">&amp;interpolate-creds</span>
  <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
  <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/credhub-interpolate.yml</span>
  <span class="nt">params</span><span class="p">:</span>
    <span class="nt">CREDHUB_CLIENT</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((credhub-client))</span>
    <span class="nt">CREDHUB_SECRET</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((credhub-secret))</span>
    <span class="nt">CREDHUB_SERVER</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((credhub-server))</span>
    <span class="nt">PREFIX</span><span class="p">:</span> <span class="s">&#39;/pipeline/vsphere&#39;</span>
    <span class="nt">INTERPOLATION_PATHS</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/config ((foundation))/env</span>
    <span class="nt">SKIP_MISSING</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">input_mapping</span><span class="p">:</span>
    <span class="nt">files</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
  <span class="nt">output_mapping</span><span class="p">:</span>
    <span class="nt">interpolated-files</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
</pre></div>
</td></tr></table>

<h3 id="jobs">Jobs</h3>
<p>Each job corresponds to a "box"
on the visual representation of your Concourse pipeline.
These jobs consume resources defined above.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nt">jobs</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">install-opsman</span>
    <span class="nt">serial</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">serial_groups</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="nv">install</span> <span class="p p-Indicator">]</span>
    <span class="nt">plan</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">aggregate</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
          <span class="nt">params</span><span class="p">:</span>
            <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">one-time-trigger</span>
          <span class="nt">trigger</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
          <span class="nt">params</span><span class="p">:</span>
            <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-download-opsman-image-creds</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/credhub-interpolate.yml</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">CREDHUB_CLIENT</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((credhub-client))</span>
          <span class="nt">CREDHUB_SECRET</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((credhub-secret))</span>
          <span class="nt">CREDHUB_SERVER</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((credhub-server))</span>
          <span class="nt">PREFIX</span><span class="p">:</span> <span class="s">&#39;/pipeline/vsphere&#39;</span>
          <span class="nt">INTERPOLATION_PATHS</span><span class="p">:</span> <span class="s">&quot;download-product-configs&quot;</span>
          <span class="nt">SKIP_MISSING</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">files</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
        <span class="nt">output_mapping</span><span class="p">:</span>
          <span class="nt">interpolated-files</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">product-configs</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">download-opsman-image</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/download-product-s3.yml</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">CONFIG_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">download-product-configs/opsman.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">config</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">product-configs</span>
        <span class="nt">output_mapping</span><span class="p">:</span>
          <span class="nt">downloaded-product</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">opsman-image</span>
      <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-creds</span>
        <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*interpolate-creds</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">create-vm</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/create-vm.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">opsman-image</span>
          <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="nt">config</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">vars</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">VARS_FILES</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">vars/((foundation))/vars/opsman-vars.yml</span>
          <span class="nt">STATE_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/state/state.yml</span>
          <span class="nt">OPSMAN_CONFIG_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/config/opsman.yml</span>
        <span class="nt">ensure</span><span class="p">:</span> <span class="nl">&amp;make-state-commit</span>
          <span class="nt">do</span><span class="p">:</span>
            <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">make-commit</span>
              <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
              <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/make-git-commit.yml</span>
              <span class="nt">input_mapping</span><span class="p">:</span>
                <span class="nt">repository</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
                <span class="nt">file-source</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">generated-state</span>
              <span class="nt">output_mapping</span><span class="p">:</span>
                <span class="nt">repository-commit</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration-commit</span>
              <span class="nt">params</span><span class="p">:</span>
                <span class="nt">FILE_SOURCE_PATH</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">state.yml</span>
                <span class="nt">FILE_DESTINATION_PATH</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/state/state.yml</span>
                <span class="nt">GIT_AUTHOR_EMAIL</span><span class="p">:</span> <span class="s">&quot;pcf-pipeline-bot@example.com&quot;</span>
                <span class="nt">GIT_AUTHOR_NAME</span><span class="p">:</span> <span class="s">&quot;Platform</span><span class="nv"> </span><span class="s">Automation</span><span class="nv"> </span><span class="s">Bot&quot;</span>
                <span class="nt">COMMIT_MESSAGE</span><span class="p">:</span> <span class="s">&#39;Update</span><span class="nv"> </span><span class="s">state</span><span class="nv"> </span><span class="s">file&#39;</span>
            <span class="p p-Indicator">-</span> <span class="nt">put</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
              <span class="nt">params</span><span class="p">:</span>
                <span class="nt">repository</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration-commit</span>
                <span class="nt">merge</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configure-authentication</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/configure-authentication.yml</span>
        <span class="nt">attempts</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="nt">config</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>
          <span class="nt">AUTH_CONFIG_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/config/auth.yml</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configure-director</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/configure-director.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">config</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">vars</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">VARS_FILES</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">vars/((foundation))/vars/director-vars.yml</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>
          <span class="nt">DIRECTOR_CONFIG_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/config/director.yml</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">apply-director-changes</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/apply-director-changes.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">staged-director-config</span>
    <span class="nt">serial</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">plan</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">aggregate</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
            <span class="nt">params</span><span class="p">:</span> <span class="p p-Indicator">{</span><span class="nt">unpack</span><span class="p">:</span> <span class="nv">true</span><span class="p p-Indicator">}</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
            <span class="nt">params</span><span class="p">:</span> <span class="p p-Indicator">{</span><span class="nt">unpack</span><span class="p">:</span> <span class="nv">true</span><span class="p p-Indicator">}</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-creds</span>
        <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*interpolate-creds</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">staged-director-config</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/staged-director-config.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>
        <span class="nt">ensure</span><span class="p">:</span> <span class="nv">*make-state-commit</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">export-installation</span>
    <span class="nt">serial</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">plan</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">aggregate</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">daily-trigger</span>
            <span class="nt">trigger</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
            <span class="nt">passed</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="nv">install-opsman</span> <span class="p p-Indicator">]</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">one-time-trigger</span>
            <span class="nt">passed</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="nv">install-opsman</span> <span class="p p-Indicator">]</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-creds</span>
        <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*interpolate-creds</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">export-installation</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/export-installation.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>
          <span class="nt">INSTALLATION_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">installation-$timestamp.zip</span>
      <span class="p p-Indicator">-</span> <span class="nt">put</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">installation</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">installation/installation*.zip</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">upgrade-opsman</span>
    <span class="nt">serial</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">serial_groups</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="nv">install</span> <span class="p p-Indicator">]</span>
    <span class="nt">plan</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">aggregate</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">one-time-trigger</span>
            <span class="nt">passed</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="nv">export-installation</span> <span class="p p-Indicator">]</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
            <span class="nt">trigger</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">opsman-image</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">installation</span>
            <span class="nt">passed</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="nv">export-installation</span> <span class="p p-Indicator">]</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-creds</span>
        <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*interpolate-creds</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">upgrade-opsman</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/upgrade-opsman.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">opsman-image</span>
          <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="nt">config</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">vars</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">VARS_FILES</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">vars/((foundation))/vars/opsman-vars.yml</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>
          <span class="nt">OPSMAN_CONFIG_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/config/opsman.yml</span>
          <span class="nt">STATE_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/state/state.yml</span>
        <span class="nt">ensure</span><span class="p">:</span> <span class="nv">*make-state-commit</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configure-director</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/configure-director.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">config</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">vars</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">VARS_FILES</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">vars/((foundation))/vars/director-vars.yml</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>
          <span class="nt">DIRECTOR_CONFIG_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/config/director.yml</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">apply-director-changes</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/apply-director-changes.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">upload-and-stage-pas</span>
    <span class="nt">serial</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">plan</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">aggregate</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
            <span class="nt">passed</span><span class="p">:</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">upgrade-opsman</span>
            <span class="nt">trigger</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-product</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-creds</span>
        <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*interpolate-creds</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">upload-product</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/upload-product.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">product</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-product</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">stage-product</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/stage-product.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">product</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-product</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configure-pas</span>
    <span class="nt">serial</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">plan</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">aggregate</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
            <span class="nt">passed</span><span class="p">:</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">upload-and-stage-pas</span>
            <span class="nt">trigger</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-creds</span>
        <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*interpolate-creds</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configure-pas</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/configure-product.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">config</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">vars</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">CONFIG_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/config/cf.yml</span>
          <span class="nt">VARS_FILES</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">vars/((foundation))/vars/cf-vars.yml</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">upload-and-stage-pas-windows</span>
    <span class="nt">serial</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">plan</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">aggregate</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
            <span class="nt">passed</span><span class="p">:</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">upgrade-opsman</span>
            <span class="nt">trigger</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-windows-product</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-creds</span>
        <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*interpolate-creds</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">upload-product</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/upload-product.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">product</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-windows-product</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">stage-product</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/stage-product.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">product</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-windows-product</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configure-pas-windows</span>
    <span class="nt">serial</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">plan</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">aggregate</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
            <span class="nt">passed</span><span class="p">:</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">upload-and-stage-pas-windows</span>
            <span class="nt">trigger</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-creds</span>
        <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*interpolate-creds</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configure-pas</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/configure-product.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">config</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">vars</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">CONFIG_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/config/pas-windows.yml</span>
          <span class="nt">VARS_FILES</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">vars/((foundation))/vars/cf-vars.yml</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">upload-stemcells</span>
    <span class="nt">serial</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">plan</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">aggregate</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
            <span class="nt">passed</span><span class="p">:</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">upgrade-opsman</span>
            <span class="nt">trigger</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-stemcell</span>
            <span class="nt">trigger</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-windows-stemcell</span>
            <span class="nt">trigger</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">healthwatch-stemcell</span>
            <span class="nt">trigger</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-creds</span>
        <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*interpolate-creds</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">upload-pas-stemcell</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/upload-stemcell.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">stemcell</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-stemcell</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">upload-pas-windows-stemcell</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/upload-stemcell.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">stemcell</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pas-windows-stemcell</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">upload-healthwatch-stemcell</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/upload-stemcell.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">stemcell</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">healthwatch-stemcell</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">upload-and-stage-healthwatch</span>
    <span class="nt">serial</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">plan</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">aggregate</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
            <span class="nt">trigger</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
            <span class="nt">passed</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="s">&quot;upgrade-opsman&quot;</span> <span class="p p-Indicator">]</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">healthwatch-product</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-creds</span>
        <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*interpolate-creds</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">upload-and-stage-product</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/upload-and-stage-product.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">product</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">healthwatch-product</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configure-healthwatch</span>
    <span class="nt">serial</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">plan</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">aggregate</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
            <span class="nt">passed</span><span class="p">:</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">upload-and-stage-healthwatch</span>
            <span class="nt">trigger</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-creds</span>
        <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*interpolate-creds</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configure-healthwatch</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/configure-product.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">config</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
          <span class="nt">vars</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">CONFIG_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/config/healthwatch.yml</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">apply-product-changes</span>
    <span class="nt">serial</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">plan</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">aggregate</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
            <span class="nt">passed</span><span class="p">:</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">configure-healthwatch</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">configure-pas</span>
              <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">configure-pas-windows</span>
            <span class="nt">trigger</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-creds</span>
        <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*interpolate-creds</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">apply-product-changes</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/apply-changes.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">staged-pas-config</span>
    <span class="nt">plan</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">aggregate</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-creds</span>
        <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*interpolate-creds</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">staged-config</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/staged-config.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">PRODUCT_NAME</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cf</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>
        <span class="nt">ensure</span><span class="p">:</span> <span class="nv">*make-state-commit</span>

  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">staged-healthwatch-config</span>
    <span class="nt">plan</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">aggregate</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks</span>
            <span class="nt">params</span><span class="p">:</span>
              <span class="nt">unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">configuration</span>
          <span class="p p-Indicator">-</span> <span class="nt">get</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">variable</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolate-creds</span>
        <span class="nt">&lt;&lt;</span><span class="p">:</span> <span class="nv">*interpolate-creds</span>
      <span class="p p-Indicator">-</span> <span class="nt">task</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">staged-config</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-image</span>
        <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">platform-automation-tasks/tasks/staged-config.yml</span>
        <span class="nt">input_mapping</span><span class="p">:</span>
          <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">interpolated-creds</span>
        <span class="nt">params</span><span class="p">:</span>
          <span class="nt">PRODUCT_NAME</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">p-healthwatch</span>
          <span class="nt">ENV_FILE</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">((foundation))/env/env.yml</span>
        <span class="nt">ensure</span><span class="p">:</span> <span class="nv">*make-state-commit</span>
</pre></div>
</td></tr></table></article></div></div></main><style>
    .footer-not-link {
        color: hsla(0,0%,100%,.7);
    }
</style>

<!-- Application footer -->
<footer class="md-footer">

    <!-- Link to previous and/or next page --><div class="md-footer-nav">
        <nav class="md-footer-nav__inner md-grid">

            <!-- Link to previous page --><a href="resources.html"
               title="Retrieving External Dependencies"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
                <div class="md-flex__cell md-flex__cell--shrink">
                    <i class="md-icon md-icon--arrow-back
                    md-footer-nav__button"></i>
                </div>
                <div class="md-flex__cell md-flex__cell--stretch
                  md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">Previous</span>Retrieving External Dependencies</span>
                </div>
            </a><!-- Link to next page --><a href="single-product.html"
               title="Ops Manager + a product"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
                <div class="md-flex__cell md-flex__cell--stretch
                  md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">Next</span>Ops Manager + a product</span>
                </div>
                <div class="md-flex__cell md-flex__cell--shrink">
                    <i class="md-icon md-icon--arrow-forward
                    md-footer-nav__button"></i>
                </div>
            </a></nav>
    </div><!-- Further information -->
    <div class="md-footer-meta md-typeset">
        <div class="md-footer-meta__inner md-grid">

            <!-- Copyright and theme information -->
            <div class="md-footer-copyright">
                <a href="https://pivotal.io/privacy-policy" target="_blank">
                    Privacy Policy
                </a>
                |
                <a href="https://pivotal.io/legal/" target="_blank">
                    Terms of Use
                </a>
                |
                <a href="https://pivotal.io" target="_blank">
                    Pivotal
                </a>
            </div>

            <div class="md-footer-social footer-not-link">
                    Pivotal Documentation © 2019 Pivotal Software, Inc. All Rights Reserved
            </div>

        </div>
    </div>
</footer></div><script src="../assets/javascripts/application.b260a35d.js"></script><script>app.initialize({version:"1.0.4",url:{base:".."}})</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/7.1.2/mermaid.min.js"></script></body></html>